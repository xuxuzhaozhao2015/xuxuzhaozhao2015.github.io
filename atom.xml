<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.xuxuzhaozhao.top</id>
    <title>xuxuzhaozhao</title>
    <updated>2020-01-17T05:11:01.999Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://blog.xuxuzhaozhao.top"/>
    <link rel="self" href="https://blog.xuxuzhaozhao.top/atom.xml"/>
    <subtitle>Aspire to inspire until I expire.</subtitle>
    <logo>https://blog.xuxuzhaozhao.top/images/avatar.png</logo>
    <icon>https://blog.xuxuzhaozhao.top/favicon.ico</icon>
    <rights>All rights reserved 2020, xuxuzhaozhao</rights>
    <entry>
        <title type="html"><![CDATA[æ­å»ºSpring Boot åå°]]></title>
        <id>https://blog.xuxuzhaozhao.top/post/buildspringboot</id>
        <link href="https://blog.xuxuzhaozhao.top/post/buildspringboot">
        </link>
        <updated>2020-01-11T05:59:50.000Z</updated>
        <content type="html"><![CDATA[<p>1ã€ç»“åˆmybatis<br>
model -&gt; dao(mapper) -&gt; mapper.xml -&gt; mybatis config -&gt; service -&gt; controller</p>
<p>2ã€æ›´æ”¹é»˜è®¤æ•°æ®åº“æ± <br>
DuridDatasourceConfig -&gt; DuridMonitorConfig</p>
<p>3ã€ç»Ÿä¸€è¿”å›å€¼<br>
RetCode -&gt; RetResult -&gt; å»ºé€ è€…æ¨¡å¼</p>
<p>4ã€web config åºåˆ—åŒ–å­—ç¬¦ä¸²è®¾ç½®<br>
WebConfig -&gt; FastJsonConfig</p>
<p>5ã€å…¨å±€å¼‚å¸¸å¤„ç†<br>
GlobalExceptionResolverConfig -&gt; ConfigurationAdvice</p>
<p>6ã€swaggerç»Ÿä¸€Apiç®¡ç†<br>
SwaggerConfig -&gt; UserController</p>
<p>7ã€æ•°æ®åº“ç‰©ç†åˆ†é¡µ pagehelper<br>
é…ç½®pagehelperé…ç½®é¡¹ -&gt; ä¿®æ”¹mapper.xml å¢åŠ selectAll -&gt; dao -&gt; serivce -&gt; serviceImpl -&gt; controller</p>
<p>8ã€mybatis-plus<br>
mybatisplusconfig</p>
<pre><code>@Configuration
@MapperScan(&quot;com.example.mybatisplus&quot;)
public class MyBatisPlusConfig {

    @Bean
    public PaginationInterceptor paginationInterceptor(){
        return new PaginationInterceptor();
    }
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è¸©å‘ä¸æŠ€å·§åˆé›†]]></title>
        <id>https://blog.xuxuzhaozhao.top/post/Javadamn</id>
        <link href="https://blog.xuxuzhaozhao.top/post/Javadamn">
        </link>
        <updated>2020-01-10T02:58:04.000Z</updated>
        <content type="html"><![CDATA[<p>1ã€ç»‘å®šé”™è¯¯</p>
<pre><code>{
  &quot;timestamp&quot;: &quot;2020-01-10T02:57:41.798+0000&quot;,
  &quot;status&quot;: 500,
  &quot;error&quot;: &quot;Internal Server Error&quot;,
  &quot;message&quot;: &quot;Invalid bound statement (not found): com.findhome.adminsystem.dao.UserInfoMapper.selectById&quot;,
  &quot;path&quot;: &quot;/select&quot;
}
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code>namespace è¦å†™å…¨ä¸èƒ½åªå†™åˆ° com.findhome.adminsystem.dao
&lt;mapper namespace=&quot;com.findhome.adminsystem.dao.UserInfoMapper&quot;&gt;
</code></pre>
<p>2ã€æ‰¹é‡ç»™é…ç½®è®¾ç½®å€¼</p>
<pre><code>@Data
@Slf4j
@Component
@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)
public class DuridDataSourceConfig {
    private String url;
    private String username;
    private String password;
    private String driverClassName;
}
</code></pre>
<p>3ã€é…ç½®druidç›‘æ§çš„æ—¶å€™æŠ¥é”™</p>
<pre><code>åœ¨ç›‘æ§ç•Œé¢-ã€‹æ•°æ®æºï¼š(*) property for user to setup
</code></pre>
<p>é…ç½®ç™½åå•çš„æ—¶å€™ï¼Œä¸è¦å†™localhostï¼›å‘èµ·ä¸€æ¬¡æ•°æ®åº“è¯·æ±‚å³å¯ï¼›</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æˆ‘è¦ç»“å©šå•¦]]></title>
        <id>https://blog.xuxuzhaozhao.top/post/marry</id>
        <link href="https://blog.xuxuzhaozhao.top/post/marry">
        </link>
        <updated>2020-01-02T01:52:15.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>ä¸zhaozhao2011.9.1åˆè¯†åœ¨æˆä¿¡é™¢ï¼ˆç°åœ¨å«æˆä¿¡å¤§ï¼‰ğŸ’â€â™‚ï¼Œ2013.5.13ç‰µæ‰‹æˆåŠŸğŸ‘«ï¼Œ2020.3.15ç»“ä¸ºå¤«å¦»ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘©ã€‚æˆ‘ä¼šæ°¸è¿œçˆ±ä½ ï¼Œé™ªä¼´ä½ ï¼Œå®ˆæŠ¤ä½ ï¼Œç›´åˆ°æˆ‘æ­»å»çš„é‚£å¤©ã€‚</p>
</blockquote>
<p><img src="https://blog.xuxuzhaozhao.top/post-images/1578646263868.JPG" alt="" loading="lazy"><br>
<img src="https://blog.xuxuzhaozhao.top/post-images/1578646322331.JPG" alt="" loading="lazy"><br>
<img src="https://blog.xuxuzhaozhao.top/post-images/1578646338926.JPG" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åœ¨é˜¿é‡Œäº‘ Centos 7 ä¸Šéƒ¨ç½²åŸºäº Docker çš„é¡¹ç›®]]></title>
        <id>https://blog.xuxuzhaozhao.top/post/linuxdeployredis</id>
        <link href="https://blog.xuxuzhaozhao.top/post/linuxdeployredis">
        </link>
        <updated>2020-01-02T01:43:09.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>ä»¥ä¸‹æŠ€æœ¯æ ˆ redisã€mysql 8.0.18ã€springbootã€vueã€nginx<br>
è®°å¾—åœ¨é˜¿é‡Œäº‘æ§åˆ¶ç«¯ä¸­å°†3306ä¸6379ç«¯å£åŠ å…¥å®‰å…¨ç»„ã€‚</p>
</blockquote>
<hr>
<h2 id="redis">redisğŸ˜€</h2>
<h3 id="1-è·å–redis">1ã€è·å–redis</h3>
<ul>
<li>docker search redis</li>
<li>docker pull redis:latest</li>
<li>docker images</li>
</ul>
<h3 id="2-åˆ›å»ºå®¿ä¸»æœº">2ã€åˆ›å»ºå®¿ä¸»æœº</h3>
<pre><code># åœ¨æ ¹ç›®å½•æ–°å»ºä¸¤ä¸ªæ•°æ®å·æ–‡ä»¶å¤¹
mkdir /home/docker/redis/{conf,data} -p
cd /home/docker/redis/conf

# è·å–é»˜è®¤çš„redis.confæ¨¡ç‰ˆ
wget http://download.redis.io/redis-stable/redis.conf

# ç¼–è¾‘redis.conf
requirepass fuckyouhacker #å¿…é¡»ä½¿ç”¨å¯†ç 
appendonly yes #æ•°æ®append
logfile &quot;access.log&quot; #æ—¥å¿—è®°å½•æ–‡ä»¶å

# è¿œç¨‹è®¿é—® æ³¨é‡Šæ‰ 127.0.0.1
# bind 127.0.0.1
protected-mode no # å¯ç”¨è¿œç¨‹è®¿é—®

# é€€å‡ºconfè¿›å…¥/home/docker/redis
cd ..
</code></pre>
<h3 id="3-è¿è¡Œredis">3ã€è¿è¡Œredis</h3>
<pre><code># å‘½ä»¤åˆ†è§£
docker run \
-p 6379:6379 \ # ç«¯å£æ˜ å°„ å®¿ä¸»æœº:å®¹å™¨
-v $PWD/data:/data:rw \ # æ˜ å°„æ•°æ®ç›®å½• rw ä¸ºè¯»å†™ï¼Œå¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„
-v $PWD/conf/redis.conf:/etc/redis/redis.conf:ro \ # æŒ‚è½½é…ç½®æ–‡ä»¶ ro ä¸ºreadonlyï¼Œå¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„
--privileged=true \ # ç»™ä¸ä¸€äº›æƒé™
--name myredis \ # ç»™å®¹å™¨èµ·ä¸ªåå­—
-d redis /etc/redis/redis.conf # deamon è¿è¡Œå®¹å™¨
</code></pre>
<h3 id="4-æŸ¥çœ‹-myredis">4ã€æŸ¥çœ‹ <code>myredis</code></h3>
<pre><code>docker images

# å¦‚æœæ²¡æœ‰çœ‹åˆ°ä»»ä½•å®¹å™¨ï¼Œåˆ™è¯´æ˜å‡ºé”™äº†ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ—¥å¿—
docker logs myredis

# æŸ¥çœ‹ myredis çš„ ip æŒ‚è½½ ç«¯å£æ˜ å°„ç­‰ä¿¡æ¯
docker inspect myredis
# æŸ¥çœ‹ myredis çš„ç«¯å£æ˜ å°„
docker port myredis
</code></pre>
<h3 id="5-è¿›å…¥myredis">5ã€è¿›å…¥<code>myredis</code></h3>
<pre><code>[root@iZuf68eahm3loty2bz4uq1Z redis]# docker exec -it myredis /bin/bash
root@338dc6c82e1e:/data# redis-cli
</code></pre>
<h3 id="6-å®¢æˆ·ç«¯è¿æ¥">6ã€å®¢æˆ·ç«¯è¿æ¥</h3>
<pre><code>redis-cli -h 47.102.xxx.xxx -p 6379
47.102.xxx.xxx:6379&gt;auth fuckhacker
</code></pre>
<p>å¼€æºå®¢æˆ·ç«¯ï¼š<br>
https://github.com/qishibo/AnotherRedisDesktopManager/releases</p>
<hr>
<h2 id="mysql-8018">mysql 8.0.18</h2>
<h3 id="1-æ‹‰å–é•œåƒ">1ã€æ‹‰å–é•œåƒ</h3>
<pre><code>docker image pull mysql:8.0.18
</code></pre>
<h3 id="2-åˆ›å»º-mysql-æ•°æ®æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶-ç›®å½•">2ã€åˆ›å»º MySQL æ•°æ®æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ ç›®å½•ã€‚</h3>
<pre><code># å®¿ä¸»æœºåˆ›å»º MySQL confã€data ç›®å½•
mkdir -p /home/data/docker/mysql/{conf,data}

# åˆ›å»ºä¸€ä¸ª MySQL å®¹å™¨ï¼ˆä¸´æ—¶çš„ï¼Œåªæ˜¯ä¸ºäº†å¤åˆ¶æ–‡ä»¶ï¼‰
docker run --name mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:8.0.18

# å¤åˆ¶å®¹å™¨ä¸­ MySQL data åˆ°å®¿ä¸»æœº
docker cp mysql:/var/lib/mysql /root/docker/mysql/data

# å¤åˆ¶å®¹å™¨ä¸­ MySQL é…ç½®æ–‡ä»¶åˆ°å®¿ä¸»æœº
docker cp mysql:/etc/mysql/my.cnf /root/docker/mysql/conf/my.cnf

# åˆ é™¤ä¸´æ—¶çš„ MySQL å®¹å™¨
docker rm -f mysql
</code></pre>
<h3 id="3-åˆ›å»ºè¿è¡Œ-mysql-å®¹å™¨">3ã€åˆ›å»ºè¿è¡Œ MySQL å®¹å™¨</h3>
<pre><code>cd /root/docker/mysql

docker run \
    -p 3306:3306 \
    -e MYSQL_ROOT_PASSWORD=123456 \
    -e TZ=Asia/Shanghai \
    -v /etc/localtime:/etc/localtime:ro \
    -v $PWD/data/mysql:/var/lib/mysql \
    -v $PWD/conf/my.cnf:/etc/mysql/my.cnf \
    --name eladmin \
    --privileged=true \
    --restart=always \
    -d mysql
    
å‚æ•°è¯´æ˜ï¼š

-p 3306:3306 å®¹å™¨ 3306 ç«¯å£æ˜ å°„åˆ°ä¸»æœº 3306 ç«¯å£
-e MYSQL_ROOT_PASSWORD=123456 æŒ‡å®š MySQL åˆå§‹å¯†ç 
-e TZ=Asia/Shanghai è®¾ç½®å®¹å™¨é»˜è®¤æ—¶åŒº
-v /etc/localtime:/etc/localtime:ro è®¾ç½®å®¹å™¨æ—¶é—´ä¸å®¿ä¸»æœºæ—¶é—´åŒæ­¥
-v /home/data/docker/mysql/data/mysql:/var/lib/mysql å°†å®¹å™¨ mysql data ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœº
-v /home/data/docker/mysql/conf/my.cnf:/etc/mysql/my.cnf å°†å®¹å™¨ mysql é…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¿ä¸»æœº
--name mysql_8.0.18 è®¾ç½®å®¹å™¨åç§°
--restart=always Docker æœåŠ¡å¯åŠ¨åï¼Œè‡ªåŠ¨å¯åŠ¨è¯¥å®¹å™¨
--privileged=true è®©å®¹å™¨ä¸­ root ç”¨æˆ·æ‹¥æœ‰ root æƒé™ï¼Œé»˜è®¤åªæœ‰æ™®é€šç”¨æˆ·æƒé™
-d åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ID
mysql:8.0.18 é•œåƒåï¼Œä¸åŠ ç‰ˆæœ¬å·ï¼Œä¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
</code></pre>
<h3 id="4-è¿›å…¥å®¹å™¨ä¿®æ”¹åˆå§‹å¯†ç å¼€å¯è¿œç¨‹è¿æ¥">4ã€è¿›å…¥å®¹å™¨ä¿®æ”¹åˆå§‹å¯†ç ï¼Œå¼€å¯è¿œç¨‹è¿æ¥</h3>
<pre><code># è¿›å…¥å®¹å™¨
docker exec -it mysql_8.0.18 /bin/sh

# å®¹å™¨å†…æ‰§è¡Œï¼Œè¾“å…¥åˆå§‹å¯†ç ï¼ˆå¦‚æœåˆå§‹å¯†ç ä¸å¯ä»¥ï¼Œä¸è¾“å¯†ç ç›´æ¥æ•²å›è½¦è¯•è¯•ï¼‰
mysql -u root -p

# æŒ‡å®šæ•°æ®åº“
mysql&gt; use mysql;

# ä¿®æ”¹åˆå§‹å¯†ç ï¼Œæ”¹å˜å¯†ç éªŒè¯æ–¹å¼ä¸º mysql_native_password 
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'P@ssw0rd';

# ä¿®æ”¹åˆå§‹å¯†ç ï¼Œæ”¹å˜å¯†ç éªŒè¯æ–¹å¼ä¸º mysql_native_password 
mysql&gt; ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'P@ssw0rd';

# å¦‚æœä¸Šé¢çš„ sql å‡ºé”™ï¼Œæ‰§è¡Œ
mysql&gt; update user set host = '%' where user = 'root';

mysql&gt; FLUSH PRIVILEGES;

# æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤ï¼ŒéªŒè¯ä¸€ä¸‹
mysql&gt; select host,user,plugin from user where user = 'root';
+-----------+------+-----------------------+
| host      | user | plugin                |
+-----------+------+-----------------------+
| %         | root | mysql_native_password |
+-----------+------+-----------------------+
</code></pre>
<hr>
<h2 id="åŸºäº-java-8-éƒ¨ç½²-springboot-åç«¯">åŸºäº java 8 éƒ¨ç½² springboot åç«¯ ğŸ˜¬</h2>
<h3 id="1-maven-package-æ‰“åŒ…">1ã€maven-&gt;package æ‰“åŒ…</h3>
<p><img src="https://blog.xuxuzhaozhao.top/post-images/1577954188124.png" alt="" loading="lazy"><br>
åŒå‡»packageå³å¯</p>
<h3 id="2-æ‹·è´jaråˆ°æœåŠ¡å™¨ä¸Š">2ã€æ‹·è´jaråˆ°æœåŠ¡å™¨ä¸Š</h3>
<p>æ‰¾åˆ°targetä¸­çš„jaræ–‡ä»¶å°†å…¶æ‹·è´åˆ°æœåŠ¡å™¨ä¸Š<br>
<img src="https://blog.xuxuzhaozhao.top/post-images/1577954303163.png" alt="" loading="lazy"></p>
<figure data-type="image" tabindex="1"><img src="https://blog.xuxuzhaozhao.top/post-images/1577954316959.png" alt="" loading="lazy"></figure>
<h3 id="3-ç¼–å†™dockerfileæ–‡ä»¶">3ã€ç¼–å†™Dockerfileæ–‡ä»¶</h3>
<pre><code>FROM java:8
VOLUME /tmp
ADD eladmin-system-2.4.jar app.jar
EXPOSE 8000
ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]
</code></pre>
<ul>
<li>FROM java:8ï¼Œè¡¨ç¤ºåŸºé•œåƒæ˜¯java8</li>
<li>VOLUME /tmpï¼Œè¡¨ç¤º æŒ‡å®šä¸´æ—¶æ–‡ä»¶ç›®å½•ä¸º/tmpã€‚å…¶æ•ˆæœæ˜¯åœ¨ä¸»æœº /var/lib/docker ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶é“¾æ¥åˆ°å®¹å™¨çš„/tmpã€‚è¯¥æ­¥éª¤æ˜¯å¯é€‰çš„</li>
<li>ADD eladmin-system-2.4.jar app.jarï¼Œè¡¨ç¤ºå°†jaråŒ…æ·»åŠ åˆ°é•œåƒä¸­ï¼Œå¹¶é‡å‘½åapp.jar</li>
<li>EXPOSE 8000ï¼Œè¡¨ç¤ºæš´éœ²çš„ç«¯å£æ˜¯8000</li>
<li>ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]ï¼Œè¡¨ç¤ºå¯åŠ¨æ—¶è¿è¡Œ java -jar app.jar</li>
</ul>
<h3 id="4-ç¼–å†™å¯åŠ¨è„šæœ¬-startupsh">4ã€ç¼–å†™å¯åŠ¨è„šæœ¬ startup.sh</h3>
<pre><code>APPNAME=eladminsystem
PORT=8000
docker build -t $APPNAME .
docker run -d -h 127.0.0.1  --name $APPNAME -p $PORT:$PORT $APPNAME
</code></pre>
<ul>
<li>é•œåƒåç§°å¿…é¡»å°å†™ï¼ˆå¦‚<code>eladminsystem</code>ï¼‰ï¼Œå¤§å†™å¯åŠ¨ä¼šæŠ¥é”™</li>
<li>docker build -t <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>P</mi><mi>P</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">è¡¨</mi><mi mathvariant="normal">ç¤º</mi><mi mathvariant="normal">æ‰§</mi><mi mathvariant="normal">è¡Œ</mi><mi mathvariant="normal">ç¼–</mi><mi mathvariant="normal">è¯‘</mi><mi mathvariant="normal">é•œ</mi><mi mathvariant="normal">åƒ</mi><mi mathvariant="normal">ï¼Œ</mi></mrow><annotation encoding="application/x-tex">APPNAME .
è¡¨ç¤º æ‰§è¡Œç¼–è¯‘é•œåƒï¼Œ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord">.</span><span class="mord cjk_fallback">è¡¨</span><span class="mord cjk_fallback">ç¤º</span><span class="mord cjk_fallback">æ‰§</span><span class="mord cjk_fallback">è¡Œ</span><span class="mord cjk_fallback">ç¼–</span><span class="mord cjk_fallback">è¯‘</span><span class="mord cjk_fallback">é•œ</span><span class="mord cjk_fallback">åƒ</span><span class="mord cjk_fallback">ï¼Œ</span></span></span></span>APPNAME æ˜¯é•œåƒåç§°ï¼›â€œ.â€è¡¨ç¤ºDockerfileåœ¨å½“å‰è·¯å¾„ä¸‹ã€‚</li>
<li>docker run -d -h 0.0.0.0 --name $APPNAME -p <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>O</mi><mi>R</mi><mi>T</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">PORT:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span></span></span>PORT $APPNAME<br>
è¿è¡Œé•œåƒï¼Œç«¯å£æ˜ å°„ä¸º8000</li>
</ul>
<p>æˆäºˆæ‰§è¡Œæƒé™ï¼šchmod +x startup.sh</p>
<h3 id="5-ç¼–å†™åœæ­¢è„šæœ¬-shutdownsh">5ã€ç¼–å†™åœæ­¢è„šæœ¬ shutdown.sh</h3>
<pre><code>APPNAME=eladminsystem
# åœæ­¢å®¹å™¨ï¼Œåˆ é™¤å®¹å™¨ï¼Œåˆ é™¤é•œåƒ
docker ps -a | grep &quot;$APPNAME&quot; | awk '{print $1 }'| xargs docker stop
docker ps -a | grep &quot;$APPNAME&quot; | awk '{print $1 }'| xargs docker rm
docker images| grep &quot;$APPNAME&quot; | awk '{print $3 }' | xargs docker rmi
</code></pre>
<p>æˆäºˆæ‰§è¡Œæƒé™ï¼šchmod +x shutdown.sh</p>
<h3 id="6-æµ‹è¯•">6ã€æµ‹è¯•</h3>
<pre><code>./startup.sh
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://blog.xuxuzhaozhao.top/post-images/1577954694845.png" alt="" loading="lazy"></figure>
<pre><code>./shutdown.sh
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://blog.xuxuzhaozhao.top/post-images/1577954718902.png" alt="" loading="lazy"></figure>
<p>å¦‚æœæ²¡æœ‰å¯åŠ¨æˆåŠŸï¼Œè®°å¾—ä½¿ç”¨ <code>docker logs eladmin-system</code>æŸ¥çœ‹æ—¥å¿—ğŸ˜</p>
<hr>
<h2 id="éƒ¨ç½²-nginx-å¹¶ä¸”ä»£ç†-vueå‰ç«¯">éƒ¨ç½² nginx å¹¶ä¸”ä»£ç† vueå‰ç«¯</h2>
<p><code>docker pull nginx</code></p>
<h3 id="1-åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶defaultconf">1ã€åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶default.conf</h3>
<p>åˆ›å»ºæ–‡ä»¶å¤¹ /root/docker/nginx</p>
<pre><code>server {
    listen  80;
    server_name localhost;

    access_log  /var/log/nginx/host.access.log  main;
    error_log   /var/log/nginx/error.log    error;

    location / {
        root    /usr/share/nginx/html;
        index   index.html index.htm;
        # å¦‚æœvue-routerä½¿ç”¨çš„æ˜¯historyæ¨¡å¼ï¼Œtry_files $uri $uri/ /index.html;  éå¸¸é‡è¦ï¼ï¼ï¼
        try_files   $uri $uri/ /index.html;
    }

    error_page  500 502 503 504 /50x.html;
    location = /50x.html{
        root /usr/share/nginx/html;
    }
}
</code></pre>
<h3 id="2-åˆ›å»ºdockerfileæ–‡ä»¶">2ã€åˆ›å»ºDockerfileæ–‡ä»¶</h3>
<p>å°† <code>npm run build:prod</code>ç”Ÿæˆçš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹æ‹·è´å…¥æ­¤å¤„<br>
<img src="https://blog.xuxuzhaozhao.top/post-images/1577955340602.png" alt="" loading="lazy"></p>
<p>è¿›å…¥ docker/nginxä¸­ vim Dockerfileæ–‡ä»¶</p>
<pre><code>FROM nginx
COPY dist/ /usr/share/nginx/html/
COPY default.conf /etc/nginx/conf.d/default.conf
</code></pre>
<h3 id="3-ç¼–å†™å¯åŠ¨è„šæœ¬">3ã€ç¼–å†™å¯åŠ¨è„šæœ¬</h3>
<pre><code>APPNAME=eladminweb
PORT=80 #è·Ÿnginxçš„ä¸€è‡´
docker build -t $APPNAME .
docker run -d  --name $APPNAME -p $PORT:$PORT $APPNAME
</code></pre>
<p>æˆäºˆæ‰§è¡Œæƒé™ï¼šchmod +x startup.sh</p>
<h3 id="4-ç¼–å†™åœæ­¢è„šæœ¬">4ã€ç¼–å†™åœæ­¢è„šæœ¬</h3>
<pre><code>APPNAME=eladminweb
# åœæ­¢å®¹å™¨ï¼Œåˆ é™¤å®¹å™¨ï¼Œåˆ é™¤é•œåƒ
docker ps -a | grep &quot;$APPNAME&quot; | awk '{print $1 }'| xargs docker stop
docker ps -a | grep &quot;$APPNAME&quot; | awk '{print $1 }'| xargs docker rm
docker images| grep &quot;$APPNAME&quot; | awk '{print $3 }' | xargs docker rmi
</code></pre>
<p>æˆäºˆæ‰§è¡Œæƒé™ï¼šchmod +x shutdown.sh</p>
<hr>
<h2 id="ä½¿ç”¨-frp-åå‘ä»£ç†è®©å¤–ç½‘ä¹Ÿèƒ½è®¿é—®å±€åŸŸç½‘ä¸­çš„ç½‘ç«™">ä½¿ç”¨ frp åå‘ä»£ç†ï¼Œè®©å¤–ç½‘ä¹Ÿèƒ½è®¿é—®å±€åŸŸç½‘ä¸­çš„ç½‘ç«™</h2>
<h3 id="fprogramfileså†…ç½‘ç©¿é€frp_0300_windows_amd64-ä¸­ä¿®æ”¹-frpcini-æ–‡ä»¶">F:\ProgramFiles\å†…ç½‘ç©¿é€\frp_0.30.0_windows_amd64 ä¸­ä¿®æ”¹ frpc.ini æ–‡ä»¶</h3>
<pre><code>[common]
# éœ€è¦å°†ã€findhome.xuxuzhaozhao.topã€‘è§£æåˆ°ã€211.149.195.55ã€‘ä¸Š
[common]
server_addr = 211.149.195.55
server_port = 7000

[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 3389
remote_port = 6000

[web01]
type = http
local_ip = 192.168.160.129
local_port = 80
#  è®¿é—®ã€findhome.xuxuzhaozhao.top:8081ã€‘ä»£ç†åˆ° ã€æœ¬æœº 192.168.160.129:80ã€‘
custom_domains = findhome.xuxuzhaozhao.top

# éœ€è¦å°†å‰ç«¯çš„ä»£ç†è¯·æ±‚ä¹Ÿè§£æå‡ºå»ï¼Œå¦åˆ™ï¼Œåœ¨å¤–ç½‘ä¸èƒ½è®¿é—®
[web02]
type = http
local_ip = 192.168.160.129
local_port = 8000
#  è®¿é—®ã€api.findhome.xuxuzhaozhao.top:8081ã€‘ä»£ç†åˆ° ã€æœ¬æœº 192.168.160.129:8000ã€‘
custom_domains = api.findhome.xuxuzhaozhao.top
</code></pre>
<p>http://findhome.xuxuzhaozhao.top:8081/</p>
<figure data-type="image" tabindex="4"><img src="https://blog.xuxuzhaozhao.top/post-images/1577955649964.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
</feed>