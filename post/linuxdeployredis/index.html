<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>åœ¨47.102.122.122ä¸Šéƒ¨ç½²docker redisã€mysql 8.0.18 | xuxuzhaozhao</title>
<link rel="shortcut icon" href="https://xuxuzhaozhao2015.github.io/favicon.ico?v=1577929490711">
<link href="https://cdn.remixicon.com/releases/v2.1.0/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://xuxuzhaozhao2015.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="åœ¨47.102.122.122ä¸Šéƒ¨ç½²docker redisã€mysql 8.0.18 | xuxuzhaozhao - Atom Feed" href="https://xuxuzhaozhao2015.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="
è®°å¾—åœ¨é˜¿é‡Œäº‘æ§åˆ¶ç«¯ä¸­å°†3306ä¸6379ç«¯å£åŠ å…¥å®‰å…¨ç»„ã€‚


redisğŸ˜€
1ã€è·å–redis

docker search redis
docker pull redis:latest
docker images

2ã€åˆ›å»ºå®¿ä¸»æœº
#..." />
    <meta name="keywords" content="linux,redis,mysql 8" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://xuxuzhaozhao2015.github.io">
  <img class="avatar" src="https://xuxuzhaozhao2015.github.io/images/avatar.png?v=1577929490711" alt="">
  </a>
  <h1 class="site-title">
    xuxuzhaozhao
  </h1>
  <p class="site-description">
    Aspire to inspire until I expire.
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              åœ¨47.102.122.122ä¸Šéƒ¨ç½²docker redisã€mysql 8.0.18
            </h2>
            <div class="post-info">
              <span>
                2020-01-02
              </span>
              <span>
                5 min read
              </span>
              
                <a href="https://xuxuzhaozhao2015.github.io/tag/xNLinIy233" class="post-tag">
                  # linux
                </a>
              
                <a href="https://xuxuzhaozhao2015.github.io/tag/yDV1rdgyiB" class="post-tag">
                  # redis
                </a>
              
                <a href="https://xuxuzhaozhao2015.github.io/tag/WIh1ycqMc5" class="post-tag">
                  # mysql 8
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://xuxuzhaozhao2015.github.io/post-images/linuxdeployredis.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <blockquote>
<p>è®°å¾—åœ¨é˜¿é‡Œäº‘æ§åˆ¶ç«¯ä¸­å°†3306ä¸6379ç«¯å£åŠ å…¥å®‰å…¨ç»„ã€‚</p>
</blockquote>
<hr>
<h2 id="redis">redisğŸ˜€</h2>
<h3 id="1-è·å–redis">1ã€è·å–redis</h3>
<ul>
<li>docker search redis</li>
<li>docker pull redis:latest</li>
<li>docker images</li>
</ul>
<h3 id="2-åˆ›å»ºå®¿ä¸»æœº">2ã€åˆ›å»ºå®¿ä¸»æœº</h3>
<pre><code># åœ¨æ ¹ç›®å½•æ–°å»ºä¸¤ä¸ªæ•°æ®å·æ–‡ä»¶å¤¹
mkdir /home/docker/redis/{conf,data} -p
cd /home/docker/redis/conf

# è·å–é»˜è®¤çš„redis.confæ¨¡ç‰ˆ
wget http://download.redis.io/redis-stable/redis.conf

# ç¼–è¾‘redis.conf
requirepass fuckyouhacker #å¿…é¡»ä½¿ç”¨å¯†ç 
appendonly yes #æ•°æ®append
logfile &quot;access.log&quot; #æ—¥å¿—è®°å½•æ–‡ä»¶å

# è¿œç¨‹è®¿é—® æ³¨é‡Šæ‰ 127.0.0.1
# bind 127.0.0.1
protected-mode no # å¯ç”¨è¿œç¨‹è®¿é—®

# é€€å‡ºconfè¿›å…¥/home/docker/redis
cd ..
</code></pre>
<h3 id="3-è¿è¡Œredis">3ã€è¿è¡Œredis</h3>
<pre><code># å‘½ä»¤åˆ†è§£
docker run \
-p 6379:6379 \ # ç«¯å£æ˜ å°„ å®¿ä¸»æœº:å®¹å™¨
-v $PWD/data:/data:rw \ # æ˜ å°„æ•°æ®ç›®å½• rw ä¸ºè¯»å†™ï¼Œå¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„
-v $PWD/conf/redis.conf:/etc/redis/redis.conf:ro \ # æŒ‚è½½é…ç½®æ–‡ä»¶ ro ä¸ºreadonlyï¼Œå¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„
--privileged=true \ # ç»™ä¸ä¸€äº›æƒé™
--name myredis \ # ç»™å®¹å™¨èµ·ä¸ªåå­—
-d redis /etc/redis/redis.conf # deamon è¿è¡Œå®¹å™¨
</code></pre>
<h3 id="4-æŸ¥çœ‹-myredis">4ã€æŸ¥çœ‹ <code>myredis</code></h3>
<pre><code>docker images

# å¦‚æœæ²¡æœ‰çœ‹åˆ°ä»»ä½•å®¹å™¨ï¼Œåˆ™è¯´æ˜å‡ºé”™äº†ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ—¥å¿—
docker logs myredis

# æŸ¥çœ‹ myredis çš„ ip æŒ‚è½½ ç«¯å£æ˜ å°„ç­‰ä¿¡æ¯
docker inspect myredis
# æŸ¥çœ‹ myredis çš„ç«¯å£æ˜ å°„
docker port myredis
</code></pre>
<h3 id="5-è¿›å…¥myredis">5ã€è¿›å…¥<code>myredis</code></h3>
<pre><code>[root@iZuf68eahm3loty2bz4uq1Z redis]# docker exec -it myredis /bin/bash
root@338dc6c82e1e:/data# redis-cli
</code></pre>
<h3 id="6-å®¢æˆ·ç«¯è¿æ¥">6ã€å®¢æˆ·ç«¯è¿æ¥</h3>
<pre><code>redis-cli -h 47.102.122.122 -p 6379
47.102.122.122:6379&gt;auth fuckyouhacker
</code></pre>
<p>å¼€æºå®¢æˆ·ç«¯ï¼š<br>
https://github.com/qishibo/AnotherRedisDesktopManager/releases</p>
<hr>
<h2 id="mysql-8018">mysql 8.0.18</h2>
<h3 id="1-æ‹‰å–é•œåƒ">1ã€æ‹‰å–é•œåƒ</h3>
<pre><code>docker image pull mysql:8.0.18
</code></pre>
<h3 id="2-åˆ›å»º-mysql-æ•°æ®æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶-ç›®å½•">2ã€åˆ›å»º MySQL æ•°æ®æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ ç›®å½•ã€‚</h3>
<pre><code># å®¿ä¸»æœºåˆ›å»º MySQL confã€data ç›®å½•
mkdir -p /home/data/docker/mysql/{conf,data}

# åˆ›å»ºä¸€ä¸ª MySQL å®¹å™¨ï¼ˆä¸´æ—¶çš„ï¼Œåªæ˜¯ä¸ºäº†å¤åˆ¶æ–‡ä»¶ï¼‰
docker run --name mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:8.0.18

# å¤åˆ¶å®¹å™¨ä¸­ MySQL data åˆ°å®¿ä¸»æœº
docker cp mysql:/var/lib/mysql /root/docker/mysql/data

# å¤åˆ¶å®¹å™¨ä¸­ MySQL é…ç½®æ–‡ä»¶åˆ°å®¿ä¸»æœº
docker cp mysql:/etc/mysql/my.cnf /root/docker/mysql/conf/my.cnf

# åˆ é™¤ä¸´æ—¶çš„ MySQL å®¹å™¨
docker rm -f mysql
</code></pre>
<h3 id="3-åˆ›å»ºè¿è¡Œ-mysql-å®¹å™¨">3ã€åˆ›å»ºè¿è¡Œ MySQL å®¹å™¨</h3>
<pre><code>cd /root/docker/mysql

docker run \
    -p 3306:3306 \
    -e MYSQL_ROOT_PASSWORD=123456 \
    -e TZ=Asia/Shanghai \
    -v /etc/localtime:/etc/localtime:ro \
    -v $PWD/data/mysql:/var/lib/mysql \
    -v $PWD/conf/my.cnf:/etc/mysql/my.cnf \
    --name eladmin \
    --privileged=true \
    --restart=always \
    -d mysql
    
å‚æ•°è¯´æ˜ï¼š

-p 3306:3306 å®¹å™¨ 3306 ç«¯å£æ˜ å°„åˆ°ä¸»æœº 3306 ç«¯å£
-e MYSQL_ROOT_PASSWORD=123456 æŒ‡å®š MySQL åˆå§‹å¯†ç 
-e TZ=Asia/Shanghai è®¾ç½®å®¹å™¨é»˜è®¤æ—¶åŒº
-v /etc/localtime:/etc/localtime:ro è®¾ç½®å®¹å™¨æ—¶é—´ä¸å®¿ä¸»æœºæ—¶é—´åŒæ­¥
-v /home/data/docker/mysql/data/mysql:/var/lib/mysql å°†å®¹å™¨ mysql data ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœº
-v /home/data/docker/mysql/conf/my.cnf:/etc/mysql/my.cnf å°†å®¹å™¨ mysql é…ç½®æ–‡ä»¶æŒ‚è½½åˆ°å®¿ä¸»æœº
--name mysql_8.0.18 è®¾ç½®å®¹å™¨åç§°
--restart=always Docker æœåŠ¡å¯åŠ¨åï¼Œè‡ªåŠ¨å¯åŠ¨è¯¥å®¹å™¨
--privileged=true è®©å®¹å™¨ä¸­ root ç”¨æˆ·æ‹¥æœ‰ root æƒé™ï¼Œé»˜è®¤åªæœ‰æ™®é€šç”¨æˆ·æƒé™
-d åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ID
mysql:8.0.18 é•œåƒåï¼Œä¸åŠ ç‰ˆæœ¬å·ï¼Œä¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
</code></pre>
<h3 id="4-è¿›å…¥å®¹å™¨ä¿®æ”¹åˆå§‹å¯†ç å¼€å¯è¿œç¨‹è¿æ¥">4ã€è¿›å…¥å®¹å™¨ä¿®æ”¹åˆå§‹å¯†ç ï¼Œå¼€å¯è¿œç¨‹è¿æ¥</h3>
<pre><code># è¿›å…¥å®¹å™¨
docker exec -it mysql_8.0.18 /bin/sh

# å®¹å™¨å†…æ‰§è¡Œï¼Œè¾“å…¥åˆå§‹å¯†ç ï¼ˆå¦‚æœåˆå§‹å¯†ç ä¸å¯ä»¥ï¼Œä¸è¾“å¯†ç ç›´æ¥æ•²å›è½¦è¯•è¯•ï¼‰
mysql -u root -p

# æŒ‡å®šæ•°æ®åº“
mysql&gt; use mysql;

# ä¿®æ”¹åˆå§‹å¯†ç ï¼Œæ”¹å˜å¯†ç éªŒè¯æ–¹å¼ä¸º mysql_native_password 
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'P@ssw0rd';

# ä¿®æ”¹åˆå§‹å¯†ç ï¼Œæ”¹å˜å¯†ç éªŒè¯æ–¹å¼ä¸º mysql_native_password 
mysql&gt; ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'P@ssw0rd';

# å¦‚æœä¸Šé¢çš„ sql å‡ºé”™ï¼Œæ‰§è¡Œ
mysql&gt; update user set host = '%' where user = 'root';

mysql&gt; FLUSH PRIVILEGES;

# æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤ï¼ŒéªŒè¯ä¸€ä¸‹
mysql&gt; select host,user,plugin from user where user = 'root';
+-----------+------+-----------------------+
| host      | user | plugin                |
+-----------+------+-----------------------+
| %         | root | mysql_native_password |
+-----------+------+-----------------------+
</code></pre>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#redis">redisğŸ˜€</a>
<ul>
<li><a href="#1-%E8%8E%B7%E5%8F%96redis">1ã€è·å–redis</a></li>
<li><a href="#2-%E5%88%9B%E5%BB%BA%E5%AE%BF%E4%B8%BB%E6%9C%BA">2ã€åˆ›å»ºå®¿ä¸»æœº</a></li>
<li><a href="#3-%E8%BF%90%E8%A1%8Credis">3ã€è¿è¡Œredis</a></li>
<li><a href="#4-%E6%9F%A5%E7%9C%8B-myredis">4ã€æŸ¥çœ‹ <code>myredis</code></a></li>
<li><a href="#5-%E8%BF%9B%E5%85%A5myredis">5ã€è¿›å…¥<code>myredis</code></a></li>
<li><a href="#6-%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5">6ã€å®¢æˆ·ç«¯è¿æ¥</a></li>
</ul>
</li>
<li><a href="#mysql-8018">mysql 8.0.18</a>
<ul>
<li><a href="#1-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F">1ã€æ‹‰å–é•œåƒ</a></li>
<li><a href="#2-%E5%88%9B%E5%BB%BA-mysql-%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E7%9B%AE%E5%BD%95">2ã€åˆ›å»º MySQL æ•°æ®æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ ç›®å½•ã€‚</a></li>
<li><a href="#3-%E5%88%9B%E5%BB%BA%E8%BF%90%E8%A1%8C-mysql-%E5%AE%B9%E5%99%A8">3ã€åˆ›å»ºè¿è¡Œ MySQL å®¹å™¨</a></li>
<li><a href="#4-%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E4%BF%AE%E6%94%B9%E5%88%9D%E5%A7%8B%E5%AF%86%E7%A0%81%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5">4ã€è¿›å…¥å®¹å™¨ä¿®æ”¹åˆå§‹å¯†ç ï¼Œå¼€å¯è¿œç¨‹è¿æ¥</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/xuxuzhaozhao2015" target="_blank">xuxuzhaozhao2015</a>
  <a class="rss" href="https://xuxuzhaozhao2015.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
